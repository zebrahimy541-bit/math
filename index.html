<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø¹Ø¯Ø§Ø¯</title>

<style>
    body {
        font-family: sans-serif;
        background: #eef1f5;
        padding: 20px;
        text-align: center;
    }
    #screen {
        width: 85%;
        height: 55px;
        font-size: 28px;
        margin-bottom: 20px;
        text-align: center;
        border: 2px solid #444;
        border-radius: 10px;
        padding: 5px;
    }
    .keyboard {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px;
        max-width: 700px;
        margin: auto;
    }
    button {
        padding: 14px 22px;
        font-size: 22px;
        cursor: pointer;
        border-radius: 10px;
        border: 1px solid #333;
        background: white;
        transition: .2s;
    }
    button:hover {
        background: #dfe6ee;
    }
    #result {
        margin-top: 30px;
        padding: 20px;
        background: #fff;
        border-radius: 12px;
        font-size: 20px;
        text-align: right;
        border: 1px solid #ccc;
    }
</style>
</head>

<body>

<h1>Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø¹Ø¯Ø§Ø¯</h1>

<input id="screen" type="text">

<div class="keyboard">

    <!-- Ø§Ø¹Ø¯Ø§Ø¯ -->
    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button onclick="add('4')">4</button>
    <button onclick="add('5')">5</button>
    <button onclick="add('6')">6</button>
    <button onclick="add('1')">1</button>
    <button onclick="add('2')">2</button>
    <button onclick="add('3')">3</button>
    <button onclick="add('0')">0</button>

    <!-- Ø¹Ù„Ø§Ù…Øªâ€ŒÙ‡Ø§ -->
    <button onclick="add('.')">.</button>
    <button onclick="add('-')">âˆ’</button>
    <button onclick="add('+')">+</button>
    <button onclick="add('/')">/</button>
    <button onclick="add('*')">*</button>

    <!-- Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ -->
    <button onclick="add('âˆš')">âˆš</button>

    <!-- ØªÙˆØ§Ù† -->
    <button onclick="add('^')">^</button>

    <!-- Ø±ÛŒØ´Ù‡ nØ§Ù… -->
    <button onclick="add('âˆš[')">nâˆš</button>

    <!-- Ù¾Ø±Ø§Ù†ØªØ² -->
    <button onclick="add('(')">(</button>
    <button onclick="add(')')">)</button>

    <!-- Ú©Ù†ØªØ±Ù„ -->
    <button onclick="clearInput()" style="background:#ffb3b3;">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
    <button onclick="categorize()" style="background:#b3ffb3;">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</button>

</div>

<div id="result"></div>

<script>

// Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ ÙˆØ±ÙˆØ¯ÛŒ
function add(c) {
    document.getElementById("screen").value += c;
}

// Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
function clearInput() {
    document.getElementById("screen").value = "";
    document.getElementById("result").innerHTML = "";
}


// ØªØ¨Ø¯ÛŒÙ„ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ + ØªÙˆØ§Ù† + Ø±ÛŒØ´Ù‡ nØ§Ù…
function convert(expr) {

    // 1) âˆš(x)
    expr = expr.replace(/âˆš\((.*?)\)/g, "Math.sqrt($1)");

    // 2) âˆšx
    expr = expr.replace(/âˆš(\d+(\.\d+)?)/g, "Math.sqrt($1)");

    // 3) ØªÙˆØ§Ù† Ù…Ø«Ù„ 2^3
    expr = expr.replace(/(\d+(\.\d+)?)\^(\d+(\.\d+)?)/g, "Math.pow($1,$3)");

    // 4) Ø±ÛŒØ´Ù‡ nØ§Ù… Ù…Ø«Ù„ nâˆšx â†’ âˆš[n]x
    expr = expr.replace(/âˆš\[(\d+)\](\d+(\.\d+)?)/g, "Math.pow($2,1/$1)");

    return expr;
}


// ØªØ§Ø¨Ø¹ ØªØ´Ø®ÛŒØµ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¨ÙˆØ¯Ù†
function isRepeatingDecimal(num) {
    if (Number.isInteger(num)) return false;
    let s = num.toString();
    return /(\d)\1{4,}/.test(s); // Ø§Ù„Ú¯ÙˆÛŒ Ø³Ø§Ø¯Ù‡ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ
}


// ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
function categorize() {

    let input = document.getElementById("screen").value;
    let result = document.getElementById("result");

    let safe = convert(input);

    let value;
    try {
        value = eval(safe);
    } catch {
        result.innerHTML = "âŒ Ø¹Ø¨Ø§Ø±Øª Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.";
        return;
    }

    // Ø´Ø±ÙˆØ¹ Ù†Ù…Ø§ÛŒØ´
    let text = `<b>Ù…Ù‚Ø¯Ø§Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒØ´Ø¯Ù‡:</b> ${value}<br><br>`;
    text += `<b>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ø¯Ù„ÛŒÙ„:</b><br><br>`;


    // ğŸ”µ Ø·Ø¨ÛŒØ¹ÛŒ
    if (Number.isInteger(value) && value >= 0) {
        text += "ğŸŸ¢ <b>Ø·Ø¨ÛŒØ¹ÛŒ</b><br>â–ª Ú†ÙˆÙ† Ø¹Ø¯Ø¯ÛŒ ØµØ­ÛŒØ­ Ùˆ ØºÛŒØ±Ù…Ù†ÙÛŒ Ø§Ø³Øª.<br><br>";
    }

    // ğŸŸ£ ØµØ­ÛŒØ­
    if (Number.isInteger(value)) {
        text += "ğŸŸ£ <b>ØµØ­ÛŒØ­</b><br>â–ª Ú†ÙˆÙ† Ø¨Ø®Ø´ Ø§Ø¹Ø´Ø§Ø±ÛŒ Ù†Ø¯Ø§Ø±Ø¯.<br><br>";
    }

    // ğŸ”µ Ú¯ÙˆÛŒØ§ ÛŒØ§ Ú¯Ù†Ú¯
    if (!Number.isInteger(value)) {

        if (isRepeatingDecimal(value)) {
            text += "ğŸ”µ <b>Ú¯ÙˆÛŒØ§</b><br>â–ª Ú†ÙˆÙ† Ø§Ø¹Ø´Ø§Ø± Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ø¯ Ùˆ Ù‚Ø§Ø¨Ù„ Ù†ÙˆØ´ØªÙ† Ø¨Ù‡ ØµÙˆØ±Øª p/q Ø§Ø³Øª.<br><br>";
        } else {
            text += "ğŸ”´ <b>Ú¯Ù†Ú¯</b><br>â–ª Ú†ÙˆÙ† Ø§Ø¹Ø´Ø§Ø± Ù†Ø§Ù…ØªÙ†Ø§Ù‡ÛŒ ØºÛŒØ± Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ø¯.<br>";
            if (safe.includes("Math.sqrt")) {
                text += "â–ª Ø­Ø§ØµÙ„ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ÛŒ Ø§Ø³Øª Ú©Ù‡ Ù…Ø±Ø¨Ø¹ Ú©Ø§Ù…Ù„ Ù†Ø¨ÙˆØ¯.<br><br>";
            }
        }

    } else {
        text += "ğŸ”µ <b>Ú¯ÙˆÛŒØ§</b><br>â–ª Ú†ÙˆÙ† Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ø³Ø± p/q Ù…Ø«Ù„ " + value + "/1 Ù‚Ø§Ø¨Ù„ Ù†ÙˆØ´ØªÙ† Ø§Ø³Øª.<br><br>";
    }

    // âš« Ø­Ù‚ÛŒÙ‚ÛŒ
    text += "âš« <b>Ø­Ù‚ÛŒÙ‚ÛŒ</b><br>â–ª Ú†ÙˆÙ† Ø±ÙˆÛŒ Ù…Ø­ÙˆØ± Ø§Ø¹Ø¯Ø§Ø¯ Ø­Ù‚ÛŒÙ‚ÛŒ Ù‚Ø§Ø¨Ù„ Ù†Ù…Ø§ÛŒØ´ Ø§Ø³Øª.<br>";

    result.innerHTML = text;
}

</script>

</body>
</html>
