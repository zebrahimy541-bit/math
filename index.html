<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†ÙˆØ¹ Ø¹Ø¯Ø¯</title>

<style>
body {
    font-family: sans-serif;
    /* Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø¢Ø¨ÛŒ Ø®ÛŒÙ„ÛŒ ØªÛŒØ±Ù‡ Ø­ÙØ¸ Ø´Ø¯Ù‡ Ø§Ø³Øª */
    background: #000033; 
    padding: 20px;
    text-align: center;
    background-image: 
        linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 50px 50px;
}
#screen {
    width: 80%;
    height: 50px;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: left;
    direction: ltr;
    border: 2px solid #444;
    border-radius: 8px;
    padding-left: 10px;
}
.keyboard {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    max-width: 600px;
    margin: auto;
}
button {
    padding: 12px 18px;
    font-size: 20px;
    cursor: pointer;
    border-radius: 8px;
    border: 1px solid #444;
    background: white;
}
button:hover {
    background: #ddd;
}
#result {
    margin-top: 25px;
    padding: 15px;
    background: #fff;
    border-radius: 10px;
    font-size: 20px;
    text-align: right;
}
#guide {
    display: none; /* Ø§ÛŒÙ† Ø®Ø· Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø¯Ø± Ø­Ø§Ù„Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù…Ø®ÙÛŒ Ø§Ø³Øª */
    margin-top: 15px;
    padding: 12px;
    background: #f9f9f9;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 18px;
    text-align: right;
    max-width: 600px;
    margin: 15px auto 0 auto;
}
#guide b {
    color: #2a4d8f;
}
#tips {
    width: 90%;
    max-width: 500px;
    margin: 10px auto 30px auto;
    padding: 12px;
    background: #ffd966;
    border: 1px solid #f0c36d;
    border-radius: 8px;
    font-size: 14px;
    text-align: right;
}
@media (max-width: 600px) {
    #tips {
        font-size: 13px;
        width: 95%;
    }
}
</style>
</head>

<body>

<!-- Ø±Ù†Ú¯ Ù…ØªÙ† Ø¹Ù†ÙˆØ§Ù† Ø¨Ù‡ Ø·Ù„Ø§ÛŒÛŒ Ø­ÙØ¸ Ø´Ø¯ -->
<h1 style="color: #FFD700;">Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†ÙˆØ¹ Ø¹Ø¯Ø¯</h1>

<input id="screen" type="text">

<div class="keyboard">
    <button onclick="add('1')">1</button>
    <button onclick="add('2')">2</button>
    <button onclick="add('3')">3</button>
    <button onclick="add('4')">4</button>
    <button onclick="add('5')">5</button>
    <button onclick="add('6')">6</button>
    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button onclick="add('0')">0</button>

    <button onclick="add('.')">.</button>
    <button onclick="add('-')">âˆ’</button>
    <button onclick="add('+')">+</button>
    <button onclick="add('*')">*</button>
    <button onclick="add('/')">/</button>

    <button onclick="add('âˆš')">âˆš</button>
    <button onclick="add('^')">^</button>

    <button onclick="add('(')">(</button>
    <button onclick="add(')')">)</button>

    <button onclick="clearInput()">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
    <button onclick="identify()">Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ</button>
</div>

<button onclick="toggleGuide()" style="margin-top:20px; background:#cce5ff;">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©ÛŒØ¨ÙˆØ±Ø¯</button>

<div id="guide">
<b>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©ÛŒØ¨ÙˆØ±Ø¯:</b><br><br>
<b>Ø§Ø¹Ø¯Ø§Ø¯ (0-9):</b> Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø¹Ø¯Ø§Ø¯.<br>
<b>.</b> â†’ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ø¹Ø´Ø§Ø±ÛŒ.<br>
<b>+</b> â†’ Ø¬Ù…Ø¹<br>
<b>âˆ’</b> â†’ ØªÙØ±ÛŒÙ‚<br>
<b>*</b> â†’ Ø¶Ø±Ø¨<br>
<b>/</b> â†’ ØªÙ‚Ø³ÛŒÙ…<br>
<b>âˆš</b> â†’ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„. Ù…Ø«Ø§Ù„ ØµØ­ÛŒØ­: 7*âˆš16 (Ø§ÙˆÙ„ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ØŒ Ø³Ù¾Ø³ Ø¹Ø¯Ø¯ Ø¯Ø§Ø®Ù„).<br>
<b>^</b> â†’ ØªÙˆØ§Ù†. Ù…Ø«Ø§Ù„ ØµØ­ÛŒØ­: 2^3 = 8 (Ø§Ø² Ú†Ù¾ Ø¨Ù‡ Ø±Ø§Ø³Øª).<br>
<b>( Ùˆ )</b> â†’ Ø¨Ø±Ø§ÛŒ ØªØ¹ÛŒÛŒÙ† Ø§ÙˆÙ„ÙˆÛŒØª Ø¹Ù…Ù„ÛŒØ§Øª.<br>
<b>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</b> â†’ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙˆØ±ÙˆØ¯ÛŒ.<br>
<b>Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ</b> â†’ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ùˆ ØªØ¹ÛŒÛŒÙ† Ù†ÙˆØ¹ Ø¹Ø¯Ø¯ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ù„ÛŒÙ„.
</div>

<div id="result"></div>

<!-- Ø¨Ø®Ø´ Ù†Ú©Ø§Øª Ù…Ù‡Ù… (Tips) Ø¨Ù‡ Ø§Ù†ØªÙ‡Ø§ÛŒ ØµÙØ­Ù‡ Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯ -->
<div id="tips" style="margin-top: 30px;">
<b>Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</b><br>
â–ª Ø¨Ø±Ø§ÛŒ Ø¬Ù…Ø¹ØŒ ØªÙØ±ÛŒÙ‚ ÛŒØ§ ØªÙ‚Ø³ÛŒÙ… Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„â€ŒÙ‡Ø§ØŒ Ø¹Ù…Ù„ÛŒØ§Øª Ø±Ø§ Ø¯Ø§Ø®Ù„ Ù¾Ø±Ø§Ù†ØªØ² Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯ ØªØ§ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§ Ø±Ø¹Ø§ÛŒØª Ø´ÙˆØ¯.<br>
â–ª Ø¨Ø±Ø§ÛŒ Ø¶Ø±Ø¨ Ø¹Ø¯Ø¯ Ù¾Ø´Øª Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ØŒ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¶Ø±Ø¨ (*) Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯. Ù…Ø«Ø§Ù„: 7*âˆš16 (Ø§ÙˆÙ„ âˆš16 Ø³Ù¾Ø³ Ø¶Ø±Ø¨ Ø¯Ø± 7).<br>
â–ª ØªØ±ØªÛŒØ¨ Ø¹Ù…Ù„ÛŒØ§Øª Ø±ÛŒØ§Ø¶ÛŒ Ùˆ Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§ Ø±Ø§ Ø±Ø¹Ø§ÛŒØª Ú©Ù†ÛŒØ¯.<br>
â–ª Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ú†Ù†Ø¯ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ Ùˆ Ø¹Ù…Ù„ÛŒØ§Øª ØªØ±Ú©ÛŒØ¨ÛŒ Ø±Ø§ Ø¨Ø§ Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.
</div>

<script>
function add(c) {
    document.getElementById("screen").value += c;
}

function clearInput() {
    document.getElementById("screen").value = "";
    document.getElementById("result").innerHTML = "";
}

function convertRadicals(expr) {
    expr = expr.replace(/(\d+(\.\d+)?)?âˆš\((.*?)\)/g, function(match, coeff, _, inner){
        if(!coeff) coeff = 1;
        return "(" + coeff + "*Math.sqrt(" + inner + "))";
    });
    expr = expr.replace(/(\d+(\.\d+)?)?âˆš(\d+(\.\d+)?)/g, function(match, coeff, _, num){
        if(!coeff) coeff = 1;
        return "(" + coeff + "*Math.sqrt(" + num + "))";
    });
    expr = expr.replace(/(\d+(\.\d+)?)\^(\d+(\.\d+)?)/g,"Math.pow($1,$3)");
    return expr;
}

function isRational(value) {
    if (Number.isInteger(value)) return true;
    for (let d=1; d<=10000; d++){
        let n = value*d;
        if (Math.abs(n - Math.round(n)) < 1e-10) return true;
    }
    return false;
}

function identify() {
    let input = document.getElementById("screen").value;
    let result = document.getElementById("result");

    let safeExpr = convertRadicals(input);

    let value;
    try {
        value = eval(safeExpr);
    } catch {
        result.innerHTML = "âŒ ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.";
        return;
    }

    if (isNaN(value)){
        result.innerHTML = "âŒ ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.";
        return;
    }

    let explanation = `<b>Ù…Ù‚Ø¯Ø§Ø± Ù†Ù‡Ø§ÛŒÛŒ:</b> ${value}<br><br>`;
    explanation += "<b>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ù„ÛŒÙ„:</b><br><br>";

    if (Number.isInteger(value) && value >=0){
        explanation += "ğŸŸ¢ <b>Ø·Ø¨ÛŒØ¹ÛŒ</b>: Ú†ÙˆÙ† ØµØ­ÛŒØ­ Ùˆ ØºÛŒØ±Ù…Ù†ÙÛŒ Ø§Ø³Øª.<br><br>";
    }
    if (Number.isInteger(value)){
        explanation += "ğŸŸ£ <b>ØµØ­ÛŒØ­</b>: Ú†ÙˆÙ† Ø¨Ø®Ø´ Ø§Ø¹Ø´Ø§Ø±ÛŒ Ù†Ø¯Ø§Ø±Ø¯.<br><br>";
    }
    if (isRational(value)){
        explanation += "ğŸ”µ <b>Ú¯ÙˆÛŒØ§</b>: Ø§Ø¹Ø´Ø§Ø± Ù…ØªÙ†Ø§Ù‡ÛŒ ÛŒØ§ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ø¯ Ùˆ Ù‚Ø§Ø¨Ù„ Ù†ÙˆØ´ØªÙ† Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ø³Ø± p/q Ø§Ø³Øª.<br><br>";
    } else {
        explanation += "ğŸ”´ <b>Ú¯Ù†Ú¯</b>: Ø§Ø¹Ø´Ø§Ø± Ù†Ø§Ù…ØªÙ†Ø§Ù‡ÛŒ ØºÛŒØ± Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ÛŒØ§ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ ØºÛŒØ± Ú©Ø§Ù…Ù„ Ø¯Ø§Ø±Ø¯.<br><br>";
    }
    explanation += "âš« <b>Ø­Ù‚ÛŒÙ‚ÛŒ</b>: Ø±ÙˆÛŒ Ù…Ø­ÙˆØ± Ø§Ø¹Ø¯Ø§Ø¯ Ø­Ù‚ÛŒÙ‚ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯.";

    result.innerHTML = explanation;
}

function toggleGuide(){
    let g = document.getElementById("guide");
    g.style.display = (g.stdisplay==="none") ? "block" : "none";
}
</script>

</body>
</html>
