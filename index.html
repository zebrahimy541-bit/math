<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø¹Ø¯Ø§Ø¯</title>

<style>
    body {
        font-family: sans-serif;
        background: #f0f0f0;
        padding: 20px;
        text-align: center;
    }
    #screen {
        width: 80%;
        height: 50px;
        font-size: 24px;
        margin-bottom: 20px;
        text-align: left;
        direction: ltr;
        border: 2px solid #444;
        border-radius: 8px;
        padding-left: 10px;
    }
    .keyboard {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        max-width: 600px;
        margin: auto;
    }
    button {
        padding: 12px 18px;
        font-size: 20px;
        cursor: pointer;
        border-radius: 8px;
        border: 1px solid #444;
        background: white;
    }
    button:hover {
        background: #ddd;
    }
    #result {
        margin-top: 25px;
        padding: 15px;
        background: #fff;
        border-radius: 10px;
        font-size: 20px;
        text-align: right;
    }
    #guide {
        display: none;
        margin-top: 15px;
        padding: 12px;
        background: #f9f9f9;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 18px;
        text-align: right;
        max-width: 600px;
        margin: 15px auto 0 auto;
    }
    #guide b {
        color: #2a4d8f;
    }
</style>
</head>

<body>

<h1>Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø¹Ø¯Ø§Ø¯</h1>

<input id="screen" type="text">

<div class="keyboard">
    <!-- Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ 1 ØªØ§ 9 Ùˆ Ø³Ù¾Ø³ 0 -->
    <button onclick="add('1')">1</button>
    <button onclick="add('2')">2</button>
    <button onclick="add('3')">3</button>
    <button onclick="add('4')">4</button>
    <button onclick="add('5')">5</button>
    <button onclick="add('6')">6</button>
    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button onclick="add('0')">0</button>

    <!-- Ø¹Ù…Ù„Ú¯Ø±Ù‡Ø§ -->
    <button onclick="add('.')">.</button>
    <button onclick="add('-')">âˆ’</button>
    <button onclick="add('+')">+</button>
    <button onclick="add('*')">*</button>
    <button onclick="add('/')">/</button>

    <!-- Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ Ùˆ ØªÙˆØ§Ù† -->
    <button onclick="add('âˆš')">âˆš</button>
    <button onclick="add('^')">^</button>

    <!-- Ù¾Ø±Ø§Ù†ØªØ² -->
    <button onclick="add('(')">(</button>
    <button onclick="add(')')">)</button>

    <!-- Ú©Ù†ØªØ±Ù„ -->
    <button onclick="clearInput()">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
    <button onclick="categorize()">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</button>
</div>

<button onclick="toggleGuide()" style="margin-top:20px; background:#cce5ff;">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©ÛŒØ¨ÙˆØ±Ø¯</button>

<div id="guide">
<b>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©ÛŒØ¨ÙˆØ±Ø¯:</b><br><br>
<b>Ø§Ø¹Ø¯Ø§Ø¯ (0-9):</b> Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø¹Ø¯Ø§Ø¯.<br>
<b>.</b> â†’ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ø¹Ø´Ø§Ø±ÛŒ.<br>
<b>+</b> â†’ Ø¬Ù…Ø¹<br>
<b>âˆ’</b> â†’ ØªÙØ±ÛŒÙ‚<br>
<b>*</b> â†’ Ø¶Ø±Ø¨<br>
<b>/</b> â†’ ØªÙ‚Ø³ÛŒÙ…<br>
<b>âˆš</b> â†’ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„. Ù…Ø«Ø§Ù„: âˆš2 ÛŒØ§ âˆš(3+1)<br>
<b>^</b> â†’ ØªÙˆØ§Ù†. Ù…Ø«Ø§Ù„: 2^3 = 8<br>
<b>( Ùˆ )</b> â†’ Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ ØªØ¹ÛŒÛŒÙ† Ø§ÙˆÙ„ÙˆÛŒØª Ø¹Ù…Ù„ÛŒØ§Øª.<br>
<b>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</b> â†’ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙˆØ±ÙˆØ¯ÛŒ<br>
<b>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</b> â†’ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¹Ø¯Ø¯ Ùˆ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ø¯Ù„ÛŒÙ„
</div>

<div id="result"></div>

<script>
// Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø§Ú©ØªØ±
function add(c) {
    document.getElementById("screen").value += c;
}

// Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
function clearInput() {
    document.getElementById("screen").value = "";
    document.getElementById("result").innerHTML = "";
}

// ØªØ¨Ø¯ÛŒÙ„ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ Ùˆ ØªÙˆØ§Ù†
function convertRadicals(expr) {
    expr = expr.replace(/âˆš\((.*?)\)/g, "Math.sqrt($1)");
    expr = expr.replace(/âˆš(\d+(\.\d+)?)/g, "Math.sqrt($1)");
    expr = expr.replace(/(\d+(\.\d+)?)\^(\d+(\.\d+)?)/g, "Math.pow($1,$3)");
    return expr;
}

// Ø¨Ø±Ø±Ø³ÛŒ Ú¯ÙˆÛŒØ§ Ø¨ÙˆØ¯Ù† Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§
function isRational(value) {
    if (Number.isInteger(value)) return true;
    for (let denominator = 1; denominator <= 10000; denominator++) {
        let numerator = value * denominator;
        if (Math.abs(numerator - Math.round(numerator)) < 1e-10) return true;
    }
    return false;
}

// Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ø°Ú©Ø± Ø¯Ù„ÛŒÙ„
function categorize() {
    let input = document.getElementById("screen").value;
    let result = document.getElementById("result");

    let safeExpression = convertRadicals(input);

    let value;
    try {
        value = eval(safeExpression);
    } catch {
        result.innerHTML = "âŒ ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.";
        return;
    }

    if (isNaN(value)) {
        result.innerHTML = "âŒ ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.";
        return;
    }

    let explanation = `<b>Ù…Ù‚Ø¯Ø§Ø± Ù†Ù‡Ø§ÛŒÛŒ:</b> ${value}<br><br>`;
    explanation += "<b>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ø¯Ù„ÛŒÙ„:</b><br><br>";

    if (Number.isInteger(value) && value >= 0) {
        explanation += "ğŸŸ¢ <b>Ø¹Ø¯Ø¯ Ø·Ø¨ÛŒØ¹ÛŒ</b><br>â–ª Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­ Ùˆ ØºÛŒØ±Ù…Ù†ÙÛŒ Ø§Ø³Øª.<br><br>";
    }
    if (Number.isInteger(value)) {
        explanation += "ğŸŸ£ <b>Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­</b><br>â–ª Ø¨Ø®Ø´ Ø§Ø¹Ø´Ø§Ø±ÛŒ Ù†Ø¯Ø§Ø±Ø¯.<br><br>";
    }

    if (isRational(value)) {
        explanation += "ğŸ”µ <b>Ø¹Ø¯Ø¯ Ú¯ÙˆÛŒØ§</b><br>â–ª Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ø³Ø± p/q Ù†ÙˆØ´Øª Ùˆ Ø§Ø¹Ø´Ø§Ø± Ø¢Ù† Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø§Ø³Øª.<br><br>";
    } else {
        explanation += "ğŸ”´ <b>Ø¹Ø¯Ø¯ Ú¯Ù†Ú¯</b><br>â–ª Ø¨Ø®Ø´ Ø§Ø¹Ø´Ø§Ø±ÛŒ Ù†Ø§Ù…ØªÙ†Ø§Ù‡ÛŒ ØºÛŒØ± Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ÛŒØ§ Ø±Ø§Ø¯ÛŒÚ©Ø§Ù„ ØºÛŒØ± Ú©Ø§Ù…Ù„ Ø¯Ø§Ø±Ø¯.<br><br>";
    }

    explanation += "âš« <b>Ø¹Ø¯Ø¯ Ø­Ù‚ÛŒÙ‚ÛŒ</b><br>â–ª Ø±ÙˆÛŒ Ù…Ø­ÙˆØ± Ø§Ø¹Ø¯Ø§Ø¯ Ø­Ù‚ÛŒÙ‚ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯.<br>";

    result.innerHTML = explanation;
}

// Ù†Ù…Ø§ÛŒØ´ / Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø±Ø§Ù‡Ù†Ù…Ø§
function toggleGuide() {
    let guide = document.getElementById("guide");
    guide.style.display = (guide.style.display === "none") ? "block" : "none";
}
</script>

</body>
</html>
